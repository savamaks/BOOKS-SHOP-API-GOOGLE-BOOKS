(()=>{var t={684:()=>{(new class{constructor(){this._arrImages=[{url:"..//image/image/banner.png"},{url:"..//image/image/banner2.png"},{url:"..//image/image/banner3.png"}],this._sliderBox=document.querySelector(".advertising__slider"),this._pointBox=document.querySelector(".advertising__pointer-box"),this._slider,this._count=0}initSlider(){this._arrImages.forEach(((t,e)=>{this._slider=`<div class="advertising__slider-image n${e} ${0===e?"active":""}" style = 'background-image:url(${this._arrImages[e].url})' data-index="${e}"></div>`,this._sliderBox.innerHTML+=this._slider,this._point=`<div class="advertising__point n${e} ${0===e?"active":""}" data-index="${e}"></div>`,this._pointBox.innerHTML+=this._point})),this._pointer=document.querySelectorAll(".advertising__point"),this._pointer.forEach((t=>{t.addEventListener("click",(()=>{this.pointerClick(t.dataset.index),this._count=t.dataset.index}))})),this.interval()}interval(){setInterval((()=>{this.pointerClick(this._count),this._count++,this._count===this._pointer.length&&(this._count=0)}),5e3)}pointerClick(t){this._sliderBox.querySelector(".active").classList.remove("active"),this._sliderBox.querySelector(`.n${t}`).classList.add("active"),this._pointBox.querySelector(".active").classList.remove("active"),this._pointBox.querySelector(`.n${t}`).classList.add("active")}}).initSlider()}},e={};function i(o){var r=e[o];if(void 0!==r)return r.exports;var s=e[o]={exports:{}};return t[o](s,s.exports,i),s.exports}(()=>{"use strict";i(684);const t=class{constructor(){this._buttonRequest=document.querySelector(".button-load"),this._keyAPI="AIzaSyCbJN6vx_NxrCKGjsVCVX7EjRLgzo1zKo4",this._bookBox=document.querySelector(".block__box"),this._start=0,this._basket=document.querySelector(".header__box-count-product"),this._amountProduct=localStorage.length,this.placeholder="../image/image/book-placeholder.jpg",this._arrCategories=[{name:"Architecture",url:"Architecture"},{name:"Art & Fashion",url:"Art"},{name:"Biography",url:"Biography & Autobiography"},{name:"Business",url:"Business"},{name:"Crafts & Hobbies",url:"Crafts & Hobbies"},{name:"Drama",url:"Drama"},{name:"Fiction",url:"Fiction"},{name:"Food & Drink",url:"Cooking"},{name:"Health & Wellbeing",url:"Health & Fitness"},{name:"History & Politics",url:"History"},{name:"Humor",url:"Humor"},{name:"Poetry",url:"Poetry"},{name:"Psychology",url:"Psychology"},{name:"Science",url:"Science"},{name:"Technology",url:"Technology"},{name:"Travel & Maps",url:"Travel"}],this._navBox=document.querySelector(".block__nav"),this._link,this._category=0}async request(){try{const t=await fetch(`https://www.googleapis.com/books/v1/volumes?q="subject:${this._arrCategories[this._category].url}"&key=${this._keyAPI}&printType=books&startIndex=${this._start}&maxResults=6&langRestrict=ru`),e=await t.json();return this._result=e}catch{console.log("error")}}initNavLink(){this._arrCategories.forEach(((t,e)=>{this._link=`<div class="block__nav-box">\n            <div class="block__nav-circle n${e} ${0==e?"active":""}" data-index=${e}></div>\n            <h2 class="block__nav-link n${e} ${0==e?"active":""}" data-index=${e}>${t.name}</h2>\n        </div>`,this._navBox.innerHTML+=this._link})),this._links=document.querySelectorAll(".block__nav-link"),this._links.forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault(),this.linkClick(t.dataset.index),+this._category!=+t.dataset.index&&(this._category=t.dataset.index,this._start=0,this._bookBox.innerHTML="",this.startRequest())}))}))}linkClick(t){this._navBox.querySelectorAll(".active").forEach((t=>{t.classList.remove("active")})),this._navBox.querySelectorAll(`.n${t}`).forEach((t=>{t.classList.add("active")}))}},e=new class extends t{constructor(){super()}start(){this.startRequest(),this.initNavLink(),this.initHandler(),this.basket()}async startRequest(){this._result=await this.request(),this.writeBook(this._result.items)}async initHandler(){this._buttonRequest.addEventListener("click",(async()=>{this._start+=6,this._result=await this.request(),this.writeBook(this._result.items)}))}writeBook(t){t&&(t.forEach((async(t,e)=>{let i=t,o=i.id,r=i.volumeInfo.authors,s=i.volumeInfo.description?.slice(0,82),n=i.volumeInfo.imageLinks?.thumbnail,a=i.volumeInfo.title,l=i.saleInfo.retailPrice,c=`${l?.amount?l.amount:""} ${l?.currencyCode?l.currencyCode:""}`,u=i.volumeInfo.averageRating,h=i.volumeInfo.raitingCount,d=!1;for(let t=0;t<localStorage.length;t++)localStorage.key(t)===o&&(d=!0);if(document.getElementById(o))return;let _="";if(u)for(let t=0;t<u;t++)_+='<img src="../image/icons/Star.svg" alt="" />';let b=`\n            <div class="card-book" id='${o}' attr = "${!0===d?"buy":"not-buy"}">\n                <img  loading="lazy" class="card-book__img" src="${n||this.placeholder}" alt="">\n                \n                <div class="card-book__box">\n                    <p class="card-book__box-autor">${r||""}</p>\n                    <h2 class="card-book__box-title">${a}</h2>\n                    <div class="card-book__box-raiting">\n                        <div class="card-book__box-raiting--star">\n                            ${u?_:""}\n                        </div>\n                    <p class="card-book__box-raiting--text">${h?h+" review":""}</p>\n                    </div>\n                    <p class="card-book__box-description">${void 0===s?"":s+"..."}</p>\n                    <p class="card-book__box-price">${c}</p>\n                    <button class="card-book__box-button ${!0===d?"in-the-cart":""}">${!0===d?"in the cart":"buy now"}</button>\n                </div>\n            </div>`;this._bookBox.innerHTML+=b})),this.initButtonBuy())}initButtonBuy(){this._buttons=document.querySelectorAll(".card-book__box-button"),this._buttons.forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault(),this.bookBuy(t)}))}))}bookBuy(t){let e=document.getElementById(t.parentElement.parentElement.id);"not-buy"===e.getAttribute("attr")?(e.setAttribute("attr","buy"),e.querySelector(".card-book__box-button").classList.toggle("in-the-cart"),e.querySelector(".card-book__box-button").textContent="in the cart",this.localMemory(e,t.parentElement.parentElement.id),this.basket()):(e.setAttribute("attr","not-buy"),e.querySelector(".card-book__box-button").classList.toggle("in-the-cart"),e.querySelector(".card-book__box-button").textContent="buy now",localStorage.removeItem(t.parentElement.parentElement.id),this.basket())}basket(){this._amountProduct=localStorage.length,this._basket.innerHTML=this._amountProduct,this._amountProduct>0?this._basket.classList.add("active"):this._basket.classList.remove("active")}localMemory(t,e){this._arrBook={id:e,autor:t.children[1].children[0].textContent,title:t.children[1].children[1].textContent,description:t.children[1].children[3].textContent,price:t.children[1].children[4].textContent},this._arrBookJson=JSON.stringify(this._arrBook),localStorage.setItem(e,this._arrBookJson)}};document.addEventListener("DOMContentLoaded",e.start())})()})();
//# sourceMappingURL=main.js.map